<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promesas</title>
</head>
<body>
    <script>
        /* // 1. Una promesa:
        let miPromesa = new Promise((resolve, reject) => {
            setTimeout(() => {
                // err: true (reject) ; err: false (resolve)
                let err = true
                if (err) reject('La promesa ha fallado')
                else resolve('La promesa se ha cumplido')
            })
        })
        miPromesa.then((resultado) => {
            console.log(resultado)
        }).catch((err) => {
            console.log(err)
        }) */

        /* // 2. Mas de una promesa:

        let promiseOne = new Promise((resolve, reject) => {
            setTimeout(resolve, 2000, 'Hola')
        })

        let promiseTwo = new Promise((resolve, reject) => {
            setTimeout(resolve, 4000, 'Mundo')
        })

        Promise.all([promiseOne, promiseTwo]).then((values) => {
            console.log(values)
        })
        console.log('El cÃ³digo sigue su camino') */

        // 3. Lllamada a un API de un server externo
        let obtenerUsuarios = () => {
          return new Promise((resolve, reject) => {
            let xhr = new XMLHttpRequest()
            xhr.open('GET', 'https://jsonplaceholder.typicode.com/users')
            xhr.onload = () => {
              if (xhr.status === 200) resolve(JSON.parse(xhr.responseText))
              else reject(xhr.statusText)
            }
            xhr.send()
          })
        }
        obtenerUsuarios()
          .then((usuarios) => {
            console.log(usuarios)
          })
          .catch((err) => {
            console.error(err)
          })
    </script>
</body>
</html>